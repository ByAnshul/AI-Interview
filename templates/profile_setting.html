<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Edit Profile – JobHire</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&family=DM+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: 'DM Sans', 'Inter', sans-serif;
      background: #eef3f8;
      font-size: 1rem;
    }

    header {
      background-color: #ffffff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 32px;
    }

    .logo {
      font-size: 26px;
      font-weight: bold;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo i {
      color: #28a745;
    }

    .nav-links {
      display: flex;
      gap: 24px;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.2s ease;
      cursor: pointer;
    }

    .nav-links a:hover {
      color: #28a745;
    }

    .auth-buttons {
      display: flex;
      gap: 10px;
      visibility:hidden;
    }

    .auth-buttons button {
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .login-btn {
      background-color: #ffffff;
      border: 1px solid black;
      font-weight: 600;
      color: rgb(88, 93, 97);
    }

    .signup-btn {
      background-color: #28a745;
      color: #fff;
      font-weight: 600;
    }

    .main-container {
      padding: 50px 20px;
      max-width: 900px;
      margin: auto;
    }

    .card {
      background: #ffffff;
      padding: 30px;
      border-radius: 14px;
      margin-bottom: 28px;
    }

    .card h2 {
      margin-top: 0;
      color: #2c3e50;
      margin-bottom: 20px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }

    .form-group {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
    }

    .form-group label {
      margin-top: 0;
      color: #2c3e50;
    }

    .form-group input,
    .form-group select {
      margin-bottom: 0;
      background: #ffffff;
    }

    label {
      font-weight: 600;
      display: block;
      margin-top: 14px;
      margin-bottom: 6px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 12px;
      background-color: #f9f9f9;
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    .upload-box {
      border: 2px dashed #28a745;
      background-color: #eaffea;
      padding: 24px;
      text-align: center;
      border-radius: 10px;
      color: #28a745;
      cursor: pointer;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .upload-box:hover {
      background-color: #d4f4d4;
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .tag {
      background-color: #e6f7ea;
      color: #28a745;
      padding: 6px 14px;
      border-radius: 16px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s ease;
      user-select: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin: 5px;
    }

    .tag .remove-btn {
      background: none;
      border: none;
      color: inherit;
      cursor: pointer;
      padding: 0;
      font-size: 12px;
      opacity: 0.7;
    }

    .tag .remove-btn:hover {
      opacity: 1;
    }

    .tag.selected {
      background-color: #28a745;
      color: #fff;
    }

    .section-sub {
      margin-top: 8px;
      font-size: 14px;
      color: #666;
    }

    .row {
      display: flex;
      
      gap: 10px;
    }

    .row>div {
      flex: 1;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
    }

    .row>div label {
      margin-top: 0;
      color: #2c3e50;
    }

    .row>div input {
      margin-bottom: 0;
      background: #ffffff;
    }

    .row-inline {
      display: flex;
      gap: 24px;
      margin-top: 10px;
    }

    .social-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .social-field {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
    }

    .social-field label {
      margin-top: 0;
      color: #2c3e50;
    }

    .social-field input {
      margin-bottom: 0;
      background: #ffffff;
    }

    .photo-circle {
      display: flex;
      justify-content: center;
      margin-bottom: 16px;
    }

    .photo-circle img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 50%;
      border: 4px solid #28a745;
    }

    .skills-input {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .skills-input input {
      flex: 1;
    }

    .add-skill-btn {
      padding: 12px 20px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s ease;
    }

    .add-skill-btn:hover {
      background: #218838;
    }

    .skills-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .available-skills {
      margin-bottom: 20px;
    }

    .selected-skills {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      min-height: 50px;
    }

    .selected-skills h3 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 16px;
      color: #2c3e50;
    }
    .saveBtn {
      background-color: #28a745;
      color: #fff;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease;
    }
  </style>
</head>

<body>

  <header>
    <div class="logo"><i class="fas fa-briefcase"></i> JobHire</div>
    <nav class="nav-links">
      <a href="/">Home</a>
      <a href="/jobs">Jobs</a>
      <a href="#">Price</a>
    </nav>
    <div class="auth-buttons">
      <button class="login-btn">Login</button>
      <button class="signup-btn">Signup</button>
    </div>
  </header>
  <form action="/update_profile" method="POST" enctype="multipart/form-data">
    <div class="main-container">
      <div class="card">
        <h2><i class="fas fa-user"></i> Basic Information</h2>
        <div class="photo-circle">
          <img id="profileImg" src="{{ url_for('static', filename=user['photo_path']) if user['photo_path'] else url_for('static', filename='img1.png') }}" alt="Profile Image" />

        </div>
        <label>Upload Photo</label>
        <div class="upload-box" onclick="document.getElementById('photoUpload').click()">Click to select image</div>
        <input id="photoUpload" name="photo" type="file" accept="image/*" style="display: none;" onchange="previewImage(event)">
  
        <div class="row">
          <div>
            <label>First Name</label>
            <input type="text" name="first_name" value="{{ user['first_name'] or '' }}" placeholder="Enter your first name">
          </div>
          <!-- Add this just before the image -->
         

          <div>
            <label>Last Name</label>
            <input type="text" name="last_name" value="{{ user['last_name'] or '' }}" placeholder="Enter your last name">
          </div>
        </div>
  
        <label>Bio</label>
        <textarea name="bio" maxlength="500" placeholder="Tell us about yourself...">{{ user['bio'] or '' }}</textarea>
  
        <div class="form-grid">
          <div class="form-group">
            <label><b>Location</b></label>
            <input type="text" name="location" value="{{ user['location'] or '' }}" placeholder="Enter your location">
          </div>
          <div class="form-group">
            <label><b>Pronouns</b></label>
            <select name="pronouns">
              <option value="">Select pronouns</option>
              <option value="He/Him" {% if user['pronouns'] == 'He/Him' %}selected{% endif %}>He/Him</option>
              <option value="She/Her" {% if user['pronouns'] == 'She/Her' %}selected{% endif %}>She/Her</option>
            </select>
          </div>
          <div class="form-group">
            <label><b>Website/Portfolio</b></label>
            <input type="url" name="website" value="{{ user['website'] or '' }}" placeholder="https://yourwebsite.com">
          </div>
          <div class="form-group">
            <label><b>Calendar Link</b></label>
            <input type="url" name="calendar" value="{{ user['calendar'] or '' }}" placeholder="https://calendly.com/yourusername">
          </div>
        </div>
      </div>
  
      <div class="card">
        <h2><i class="fas fa-file-upload"></i> Resume</h2>
        
        <div class="upload-box" onclick="document.getElementById('resumeUpload').click()">
          <span id="uploadText">Click to select your resume (PDF)</span>
        </div>
      
        <input id="resumeUpload" name="resume" type="file" accept="application/pdf" style="display: none;" onchange="showFileName(this)">
        
        <div class="section-sub">PDF files only, up to 10MB</div>
      

        {% if user['resume_path'] %}
      <a href="{{ url_for('static', filename='uploads/' + user['resume_path']) }}" target="_blank">Download Current Resume</a>
        {% endif %}

      </div>
  
      <div class="card">
        <h2><i class="fas fa-code"></i> Skills & Interests</h2>
        <div class="skills-container">
          <div class="available-skills">
            <div class="skills-input">
              <input type="text" id="skillInput" name="skills" value="{{ user['skills'] or '' }}" placeholder="Add a skill or interest...">
            </div>
          </div>
        </div>
      </div>
  
      <div class="card">
        <h2><i class="fas fa-link"></i> Social Links</h2>
        <div class="social-row">
          <div class="social-field">
            <label><i class="fab fa-twitter"></i> Twitter</label>
            <input type="url" name="twitter" value="{{ user['twitter'] or '' }}" placeholder="https://twitter.com/username">
          </div>
          <div class="social-field">
            <label><i class="fab fa-linkedin"></i> LinkedIn</label>
            <input type="url" name="linkedin" value="{{ user['linkedin'] or '' }}" placeholder="https://linkedin.com/in/username">
          </div>
          <div class="social-field">
            <label><i class="fab fa-github"></i> GitHub</label>
            <input type="url" name="github" value="{{ user['github'] or '' }}" placeholder="https://github.com/username">
          </div>
          <div class="social-field">
            <label><i class="fab fa-instagram"></i> Instagram</label>
            <input type="url" name="instagram" value="{{ user['instagram'] or '' }}" placeholder="https://instagram.com/username">
          </div>
        </div>
      </div>
  
      <button class="saveBtn" type="submit">Save</button>
    </div>
  </form>
  


  <script>
    function showFileName(input) {
      const fileName = input.files[0]?.name || 'Click to select your resume (PDF)';
      document.getElementById('uploadText').textContent = fileName;
    }
    function previewImage(event) {
      const reader = new FileReader();
      reader.onload = function () {
        document.getElementById('profileImg').src = reader.result;
      }
      reader.readAsDataURL(event.target.files[0]);
    }

    function toggleSkill(element) {
      const selectedTags = document.getElementById('selectedTags');
      const skill = element.textContent;

      if (element.classList.contains('selected')) {
        // Remove from selected
        const selectedTag = document.querySelector(`#selectedTags .tag[data-skill="${skill}"]`);
        if (selectedTag) {
          selectedTag.remove();
        }
        element.classList.remove('selected');
      } else {
        // Add to selected
        if (selectedTags.children.length < 10) {
          const newTag = document.createElement('div');
          newTag.className = 'tag';
          newTag.setAttribute('data-skill', skill);
          newTag.innerHTML = `${skill}<button class="remove-btn" onclick="removeSkill(this, '${skill}')">×</button>`;
          selectedTags.appendChild(newTag);
          element.classList.add('selected');
        }
      }
      updateTagCount();
    }

    function removeSkill(button, skill) {
      const tag = button.parentElement;
      tag.remove();
      const availableTag = document.querySelector(`#availableTags .tag[data-skill="${skill}"]`);
      if (availableTag) {
        availableTag.classList.remove('selected');
      }
      updateTagCount();
    }

    function updateTagCount() {
      const selectedCount = document.querySelectorAll('#selectedTags .tag').length;
      document.querySelector('.section-sub').textContent = `${selectedCount}/10 skills selected`;
    }

    function addSkill() {
      const input = document.getElementById('skillInput');
      const skill = input.value.trim();

      if (skill && document.querySelectorAll('#selectedTags .tag').length < 10) {
        const availableTags = document.getElementById('availableTags');
        const newTag = document.createElement('div');
        newTag.className = 'tag';
        newTag.setAttribute('data-skill', skill);
        newTag.textContent = skill;
        newTag.onclick = function () { toggleSkill(this); };
        availableTags.appendChild(newTag);
        input.value = '';
      }
    }

    // Allow adding skills with Enter key
    document.getElementById('skillInput').addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        addSkill();
      }
    });
  </script>

</body>

</html>